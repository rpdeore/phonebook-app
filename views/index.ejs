

<!DOCTYPE html>
<html ng-app="myApp">
  <head>

    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  </head>
  <body>

    <div class="container" ng-controller="AppCtrl">
      <div class="panel panel-info">
        <div class="panel panel-heading">
          <h3 class="text-center">Phone Book App </h3>
        </div>
        <div class="panel panel-body">

          <div class="group1 form-inline" style = "margin-bottom: 20px;">
            <div class="serachGroup form-group" style = "margin-right: 20px;">
              <label>Search:</label>
              <input type="text" class="form-control"/>
              <span class="glyphicon glyphicon-search"></span>
            </div>

            <div class="listGroup form-group">
              <label> Group:</label>
              <select ng-model="selectedItem" id="list" class="form-control" name="list">
                   <option value="All"> All </option>
                   <% for(var i=0; i<grouplist.length; i++) { %>
                   <option value=<%=grouplist[i]._id %>><%= grouplist[i].groupname %></option>

                   <% } %>
                  </select>
              <input type="button" class="btn btn-danger btn-sm" value="Delete Group" ng-click='deleteGroup(selectedItem)'>

            </div>
          </div>

          <div class="table-responsive">
           <table class="table table-striped">
             <thead>
                <tr>
                  <th>Name</th>
                  <th>Group</th>
                  <th>Phone Number</th>
                  <th>            </th>
                </tr>
               </thead>

             <tbody>

          <% console.log("itm"+this.list)  %>
                      <% for(var i=0; i<grouplist.length; i++) { %>
                         <% var id = grouplist[i]._id %>
                         <% for(var j=0; j<(grouplist[i].contacts).length; j++) { %>
                         <% var value = (grouplist[i].contacts)[j]; %>
                          <% if(value  != null) { %>
                            <% var contactname = (grouplist[i].contacts)[j].contactname; %>
                              <tr>
                                <td><%= (grouplist[i].contacts)[j].contactname %> </td>
                                <td><%= grouplist[i].groupname %></td>
                                <td><%= (grouplist[i].contacts)[j].phonenumber %></td>
                                <td>
                                  <a  rel ="nofollow" href="" ng-click='remove("<%= id%>","<%= contactname%>")'><span class="glyphicon glyphicon-trash"></span>&nbsp;</a>

                                </td>
                              </tr>
                              <% } %>
                          <% } %>
                      <% } %>


             </tbody>
            </table>
          </div>
        </div>

        <div class="panel-footer">
          <form class="form-inline " style = "margin-bottom: 20px;">
                    <div class="form-group" style = "margin-right: 20px;">
                        <span>Name：</span>
                        <input type="text" class="form-control" ng-model="contact.contactname">
                    </div>
                    <div class="form-group" style = "margin-right: 20px;">
                        <span>Tel：</span>
                        <input type="text" class="form-control" ng-model="contact.phonenumber">
                    </div>

                    <div class="form-group" style = "margin-right: 20px;">
                     <label> Group:</label>

                 <select id="group1" class="form-control" ng-model="contact.groupname">
                   <option>Friends</option>
                   <option>Family</option>
                   <option>Office</option>
                  </select>
                      </div>
                    <input type="button" class="btn btn-primary btn-sm" value="Add" ng-click="addContact()" >
                </form>
           <form class="form-inline ">
                    <div class="form-group" style = "margin-right: 20px;">
                        <span>Group Name：</span>
                        <input type="text" class="form-control" ng-model="group.groupname">
                    </div>
          <input type="button" class="btn btn-primary btn-sm" value="Add Group" ng-click="addGroup()">
                </form>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular.js">    </script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular-route.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular-resource.js"></script>
    <script src="/controller.js"></script>

  </body>
</html>
